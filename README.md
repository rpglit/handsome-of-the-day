# Handsome of the Day Bot

**Handsome of the Day Bot** — это Telegram-бот, который решает кто сегодня "Красавчика дня", а кому придется называться "Лузера дня".

## Оглавление

- [Описание](#описание)
- [Функционал](#функционал)
- [Требования](#требования)
- [Установка и запуск](#установка-и-запуск)
- [Использование](#использование)
- [Лицензия](#лицензия)

## Описание

Добавьте бота в ваш групповой чат телеграмм и определите, кто является "Красавчиком дня", а кто "Лузером дня". Бот собирает статистику и сохраняет результаты в базу данных PostgreSQL, которую удобно администрировать с помощью pgAdmin4, для просмотра общей или личной статистики.

## Функционал

- Простое развертывание с помощью **Docker-compose**.
- Команда `/run` — выполняет ежедневный выбор "Красавчика" и "Лузера" дня.
- Команды `/stat` и `/my` — для просмотра статистики.
- Автоматическое выполнение в 12:00 каждый день через **APScheduler**.
- Логирование событий и ошибок бота в файл для дальнейшего анализа.

## Требования

- **Ubuntu 24.04.1 LTS** (Данный дистрибутив использовался для разработки и отладки)
- **Docker Compose**
- **Git**
- **Telegram API Token**

## Установка и запуск

1. Перейдите в корень системы:
   ```bash
   cd /

2. Склонируйте репозиторий:
   ```bash
   sudo git clone https://github.com/rpglit/handsome-of-the-day.git
  
3. Соберите Docker образ самого бота:
   ```bash
   sudo docker build -t handsome-of-the-day-bot /handsome-of-the-day/Docker/.

4. Измените файл переменных окружения, добавив токен бота и id группового чата:
   ```bash
   sudo nano /handsome-of-the-day/Docker/.env
   
5. Используйте Docker Compose для создания всех контейнеров:
   ```bash
   sudo docker compose -f handsome-of-the-day/Docker/docker-compose.yml up -d

6. Для администрирования базы данных используйте веб-интерфейс pgAdmin4, работающий на порту 5050.
   ```bash
   http://192.168.148.129:5050/browser/

7. Логи бота пишутся в отдельный файл:
   ```bash
   sudo cat handsome-of-the-day/logs/bot.log

## Использование

1. Добавьте Telegram бота в групповой чат, выдав ему права администратора.

2. Используйте команду /reg чтобы принять участие в розыгрыше званий.

3. Запустите поиск героев дня с помощью команды /run или дождитесь 9 часов по Гринвичу.

4. Для отображения полной личной и общей за месяц статистики используйте команды /my и /stat соответственно.

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности можно найти в файле LICENSE.
